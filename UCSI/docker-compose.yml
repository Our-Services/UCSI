version: "3.8"

services:
  bot:
    build: .
    container_name: ucsi-telegram-bot
    environment:
      # Provide your Telegram bot token here or via .env file loaded by Compose
      TELEGRAM_TOKEN: ${TELEGRAM_TOKEN}
      # Optional: HEADLESS, URL etc.
      # HEADLESS: "1"
      # URL: "https://example.com/attendance"
    volumes:
      - ./config:/app/config
      - ./output:/app/output
    restart: always

  web:
    build: .
    container_name: ucsi-web
    command: python -u src/web_app.py
    environment:
      HOST: 0.0.0.0
      PORT: 5000
      FLASK_SECRET_KEY: ${FLASK_SECRET_KEY}
    volumes:
      - ./config:/app/config
      - ./output:/app/output
    ports:
      - "5000:5000"
    restart: always